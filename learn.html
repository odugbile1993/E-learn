<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini E-Learning Platform</title>
  <style>
    /* ---- Global ---- */
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    a { text-decoration: none; color: inherit; }

    /* ---- Layout ---- */
    .container {
      max-width: 860px;
      margin: 2rem auto;
      padding: 1.5rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,.07);
    }
    h1 { text-align: center; margin-bottom: 1.5rem; color: #2c3e50; }
    h2 { margin-top: 0; color: #34495e; }

    /* ---- Home ---- */
    #home { display: block; }
    .course-list { display: grid; gap: 1rem; }
    .course-card {
      border: 1px solid #e0e6ed;
      border-radius: 8px;
      padding: 1rem;
      cursor: pointer;
      transition: all .2s ease;
      background: #fafafa;
    }
    .course-card:hover {
      border-color: #3498db;
      background: #f0f8ff;
      transform: translateY(-2px);
    }
    .course-title { font-weight: 600; margin-bottom: .4rem; }
    .progress-bar {
      height: 8px;
      background: #e0e6ed;
      border-radius: 4px;
      overflow: hidden;
      margin-top: .5rem;
    }
    .progress-fill {
      height: 100%;
      background: #3498db;
      width: 0;
      transition: width .3s ease;
    }

    /* ---- Detail ---- */
    #detail { display: none; }
    .back-btn {
      background: #7f8c8d;
      color: #fff;
      border: none;
      padding: .5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: .9rem;
      margin-bottom: 1rem;
      transition: background .2s;
    }
    .back-btn:hover { background: #636e72; }

    .lesson-list { margin-top: 1rem; display: grid; gap: .75rem; }
    .lesson-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: .75rem;
      border: 1px solid #e0e6ed;
      border-radius: 6px;
      background: #fdfdfd;
    }
    .lesson-item button {
      background: #2ecc71;
      color: #fff;
      border: none;
      padding: .35rem .75rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: .85rem;
      transition: background .2s;
    }
    .lesson-item button:hover { background: #27ae60; }
    .lesson-item button.completed {
      background: #95a5a6;
      cursor: default;
    }
    .lesson-item button.completed:hover { background: #95a5a6; }

    .complete-course-btn {
      display: block;
      width: 100%;
      margin-top: 1.5rem;
      background: #3498db;
      color: #fff;
      border: none;
      padding: .75rem;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: background .2s;
    }
    .complete-course-btn:hover { background: #2980b9; }
    .complete-course-btn.completed {
      background: #27ae60;
      cursor: default;
    }
    .complete-course-btn.completed:hover { background: #27ae60; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Mini E-Learning Platform</h1>

    <!-- Home View -->
    <section id="home">
      <h2>Courses</h2>
      <div class="course-list"></div>
    </section>

    <!-- Detail View -->
    <section id="detail">
      <button class="back-btn" onclick="showHome()">Back to Courses</button>
      <h2 id="detail-title"></h2>

      <div style="margin: .75rem 0;">
        Progress: <strong id="detail-progress">0%</strong>
      </div>
      <div class="progress-bar">
        <div id="detail-progress-fill" class="progress-fill"></div>
      </div>

      <h3 style="margin-top: 1.5rem;">Lessons</h3>
      <div class="lesson-list"></div>

      <button id="complete-course-btn" class="complete-course-btn">Mark Course as Completed</button>
    </section>
  </div>

  <script>
    // ------------------- Data -------------------
    const STORAGE_KEY = 'mini_elearning_courses';
    let courses = [
      {
        id: 1,
        title: 'JavaScript Basics',
        completed: false,
        lessons: [
          { id: 1, title: 'Variables & Data Types', completed: false },
          { id: 2, title: 'Functions', completed: false },
          { id: 3, title: 'Control Flow', completed: false }
        ]
      },
      {
        id: 2,
        title: 'HTML & CSS Essentials',
        completed: false,
        lessons: [
          { id: 1, title: 'HTML Structure', completed: false },
          { id: 2, title: 'CSS Selectors', completed: false },
          { id: 3, title: 'Box Model', completed: false }
        ]
      },
      {
        id: 3,
        title: 'Responsive Design',
        completed: false,
        lessons: [
          { id: 1, title: 'Media Queries', completed: false },
          { id: 2, title: 'Flexbox', completed: false },
          { id: 3, title: 'CSS Grid', completed: false }
        ]
      }
    ];

    // Load from localStorage if exists
    function loadData() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) courses = JSON.parse(saved);
    }
    function saveData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(courses));
    }

    // ------------------- Helpers -------------------
    function progress(course) {
      const done = course.lessons.filter(l => l.completed).length;
      return Math.round((done / course.lessons.length) * 100);
    }

    // ------------------- Render Home -------------------
    function renderHome() {
      const list = document.querySelector('#home .course-list');
      list.innerHTML = '';
      courses.forEach(c => {
        const prog = progress(c);
        const card = document.createElement('div');
        card.className = 'course-card';
        card.innerHTML = `
          <div class="course-title">${c.title} ${c.completed ? '<small style="color:#27ae60;">(Completed)</small>' : ''}</div>
          <div><small>${prog}% complete</small></div>
          <div class="progress-bar"><div class="progress-fill" style="width:${prog}%;"></div></div>
        `;
        card.onclick = () => showDetail(c.id);
        list.appendChild(card);
      });
    }

    // ------------------- Show Detail -------------------
    let currentCourseId = null;
    function showDetail(id) {
      currentCourseId = id;
      const course = courses.find(c => c.id === id);
      document.getElementById('detail-title').textContent = course.title;

      const prog = progress(course);
      document.getElementById('detail-progress').textContent = `${prog}%`;
      document.getElementById('detail-progress-fill').style.width = `${prog}%`;

      const lessonList = document.querySelector('#detail .lesson-list');
      lessonList.innerHTML = '';
      course.lessons.forEach(l => {
        const item = document.createElement('div');
        item.className = 'lesson-item';
        item.innerHTML = `<span>${l.title}</span>`;
        const btn = document.createElement('button');
        if (l.completed) {
          btn.textContent = 'Completed';
          btn.className = 'completed';
        } else {
          btn.textContent = 'Mark Complete';
          btn.onclick = (e) => {
            e.stopPropagation();
            markLessonComplete(id, l.id);
          };
        }
        item.appendChild(btn);
        lessonList.appendChild(item);
      });

      const completeBtn = document.getElementById('complete-course-btn');
      if (course.completed) {
        completeBtn.textContent = 'Course Completed';
        completeBtn.className = 'complete-course-btn completed';
        completeBtn.onclick = null;
      } else {
        completeBtn.textContent = 'Mark Course as Completed';
        completeBtn.className = 'complete-course-btn';
        completeBtn.onclick = markCourseComplete;
      }

      document.getElementById('home').style.display = 'none';
      document.getElementById('detail').style.display = 'block';
    }

    // ------------------- Actions -------------------
    function markLessonComplete(courseId, lessonId) {
      const course = courses.find(c => c.id === courseId);
      const lesson = course.lessons.find(l => l.id === lessonId);
      lesson.completed = true;
      saveData();
      // Auto-complete course if all lessons done
      if (progress(course) === 100) {
        course.completed = true;
      }
      showDetail(courseId);
    }

    function markCourseComplete() {
      const course = courses.find(c => c.id === currentCourseId);
      course.completed = true;
      course.lessons.forEach(l => l.completed = true);
      saveData();
      showDetail(currentCourseId);
    }

    function showHome() {
      document.getElementById('detail').style.display = 'none';
      document.getElementById('home').style.display = 'block';
      renderHome();
    }

    // ------------------- Init -------------------
    loadData();
    renderHome();
  </script>
</body>
</html>